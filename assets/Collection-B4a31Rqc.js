import{d as b,c as d,o as c,n as B,a as h,b as A,e as t,u as O,t as k,F as U,r as S,_ as $,f as D,g as I,m as L,h as N,i as g,w as M,j as R,k as T,v as F,l as E,p as z,T as K,q as Y}from"./index-CCUOU0ia.js";import{F as H,u as P,P as G}from"./useCollections-DquDfmTv.js";const J=["src"],Q=["title"],W={class:"card-title"},X={key:0},Z={class:"tags-list"},ee=["title"],te={class:"card-description"},le=b({__name:"Card",props:{collectionItem:{}},emits:["open"],setup(m,{emit:u}){const e=m,r=u;function n(){r("open",e.collectionItem)}return(l,o)=>(c(),d("div",{onClick:o[0]||(o[0]=i=>n()),class:B(["card",{"card-incomplete":!l.collectionItem.completed}])},[l.collectionItem.imageBase64?(c(),d("img",{key:0,src:l.collectionItem.imageBase64,alt:"Card image",class:"card-image"},null,8,J)):h("",!0),l.collectionItem.completed?h("",!0):(c(),A(O(H),{key:1,icon:["fas","lock"],class:"lock-icon"})),t("div",{class:"card-content",title:e.collectionItem.name??"New item"},[t("h3",W,k(e.collectionItem.name??"New item"),1),e.collectionItem.tags?(c(),d("div",X,[t("ul",Z,[(c(!0),d(U,null,S(e.collectionItem.tags.slice(0,2),(i,s)=>(c(),d("li",{key:s,class:"tag"},[t("p",null,k(i),1)]))),128)),e.collectionItem.tags.length>2?(c(),d("li",{key:0,class:"tag tag-more",title:e.collectionItem.tags.slice(2).join(", ")}," … ",8,ee)):h("",!0)])])):h("",!0),t("p",te,k(e.collectionItem.description),1)],8,Q)],2))}}),oe=$(le,[["__scopeId","data-v-5e3524a0"]]),se={class:"category-title"},ae={class:"card-list"},ne=b({__name:"CollectionItems",props:{items:{}},emits:["open"],setup(m,{emit:u}){const e=m,r=u,n=D(()=>e.items.reduce((o,i)=>{const s=i.category||"Uncategorized";return o[s]||(o[s]=[]),o[s].push(i),o},{}));function l(o){r("open",o)}return(o,i)=>(c(!0),d(U,null,S(n.value,(s,p)=>(c(),d("div",{key:p,class:"category-section"},[t("h2",se,k(p||"Uncategorized"),1),t("div",ae,[(c(!0),d(U,null,S(s,f=>(c(),d("div",{key:f.id},[I(oe,{"collection-item":f,onOpen:l},null,8,["collection-item"])]))),128))])]))),128))}}),ie=$(ne,[["__scopeId","data-v-ea70719c"]]),ce=b({__name:"ToggleButton",props:L({checkedState:{},uncheckedState:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const u=N(m,"modelValue"),e=m;function r(){u.value=!u.value}return(n,l)=>(c(),d("button",{class:B(["toggle-btn",{checked:!u.value}]),onClick:r},k(u.value?e.checkedState:e.uncheckedState),3))}}),j=$(ce,[["__scopeId","data-v-b9df9e5e"]]),ue={class:"file-input-container"},de={class:"file-input-label",for:"file-upload"},re={key:0,class:"file-name"},me=b({__name:"FileInput",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(m){const u=N(m,"modelValue");function e(r){const n=r.target.files[0];if(n){const l=new FileReader;l.onload=()=>{typeof l.result=="string"&&(u.value=l.result)},l.readAsDataURL(n)}}return(r,n)=>(c(),d("div",ue,[t("label",de,[n[0]||(n[0]=t("span",{class:"file-btn"},"Choose File",-1)),u.value?(c(),d("span",re,k(u.value),1)):h("",!0)]),t("input",{type:"file",id:"file-upload",onChange:e},null,32)]))}}),pe=$(me,[["__scopeId","data-v-485e189a"]]),ve={class:"tags-section"},ge={class:"tags-list"},fe=["onClick"],_e={class:"add-tag"},ye=b({__name:"Tag",props:L({modelValue:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const u=m,e=g(""),r=g(!1),n=N(m,"modelValue");n.value||(n.value=[]),M(()=>u.modelValue,s=>{n.value=s??[]});function l(){r.value&&e.value.trim()&&o(),r.value=!r.value}function o(){const s=e.value.trim();s&&!n.value.includes(s)&&n.value.push(s),e.value="",r.value=!1}function i(s){n.value.splice(s,1)}return(s,p)=>(c(),d("div",ve,[p[1]||(p[1]=t("label",{for:"tag-input",class:"tags-label"},"Tags:",-1)),t("ul",ge,[(c(!0),d(U,null,S(n.value,(f,V)=>(c(),d("li",{key:V,class:"tag"},[R(k(f)+" ",1),t("button",{class:"remove-btn delete-btn",onClick:x=>i(V)},"×",8,fe)]))),128))]),t("div",_e,[r.value?T((c(),d("input",{key:0,id:"tag-input","onUpdate:modelValue":p[0]||(p[0]=f=>e.value=f),onKeyup:E(o,["enter"]),type:"text",placeholder:"Add a tag"},null,544)),[[F,e.value]]):h("",!0),t("button",{class:"primary-btn small-btn",onClick:l},k(r.value?"Save Tag":"Add Tag"),1)])]))}}),Ce=$(ye,[["__scopeId","data-v-224cf581"]]),he=["src"],ke={key:1,class:"card-placeholder"},Ie=b({__name:"HiddenImageFileInput",props:L({placeholderText:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const u=N(m,"modelValue"),e=g(null);function r(){e.value?.click()}function n(l){const o=l.target.files[0];if(o){const i=new FileReader;i.onload=()=>{typeof i.result=="string"&&(u.value=i.result)},i.readAsDataURL(o)}}return(l,o)=>(c(),d("div",{class:"image-upload-wrapper",onClick:r},[u.value?(c(),d("img",{key:0,src:u.value,alt:"Uploaded image",class:"uploaded-image"},null,8,he)):(c(),d("div",ke,[t("p",null,k(l.placeholderText),1)])),t("input",{type:"file",ref_key:"fileInput",ref:e,onChange:n,accept:"image/*",style:{display:"none"}},null,544)]))}}),Ve=$(Ie,[["__scopeId","data-v-47d03b0a"]]);P();const be={key:0,class:"modal-overlay"},$e={class:"wrapper"},we={class:"modal-content"},Te={class:"modal-body"},Fe={class:"accordion"},Ue={key:0,class:"accordion-body"},xe={class:"description"},De={class:"tags"},Be={class:"category"},Se={class:"fileInput"},Ne=b({__name:"CardDetails",props:{isVisible:{},item:{}},emits:["close","save"],setup(m,{emit:u}){const e=m,r=u,n=g(e.item.name),l=g(e.item.description??null),o=g(e.item.completed),i=g(null),s=g(e.item.tags??[]),p=g(null),f=g(!1);M(()=>[e.isVisible,e.item],([w])=>{w&&(n.value=e.item.name,l.value=e.item.description??null,o.value=e.item.completed,i.value=e.item.imageBase64??null,s.value=e.item.tags??[],p.value=e.item.category??null)},{immediate:!0});function V(){r("close")}async function x(){e.item.name=n.value,e.item.description=l.value,e.item.completed=o.value,e.item.imageBase64=i.value,e.item.tags=s.value,e.item.category=p.value,r("save")}return(w,a)=>w.isVisible?(c(),d("div",be,[t("div",$e,[t("div",{class:B(["item-image",[{"card-incomplete":!o.value}]])},[I(Ve,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=v=>i.value=v),"placeholder-text":"Please upload an image"},null,8,["modelValue"]),o.value?h("",!0):(c(),A(O(H),{key:0,icon:["fas","lock"],class:"lock-icon"}))],2),t("div",we,[a[12]||(a[12]=t("h2",null,"Edit Item Details",-1)),t("div",Te,[I(j,{modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=v=>o.value=v),"unchecked-state":"Add to collection?","checked-state":"Remove from collection?"},null,8,["modelValue"]),a[11]||(a[11]=t("label",{for:"name"},"Name:",-1)),T(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=v=>n.value=v),id:"name"},null,512),[[F,n.value]]),t("div",Fe,[t("button",{class:"accordion-header",onClick:a[3]||(a[3]=v=>f.value=!f.value)},[a[8]||(a[8]=R(" Advanced Details ")),t("span",{class:B(["chevron",{rotated:f.value}])},"⌄",2)]),I(K,{name:"accordion"},{default:z(()=>[f.value?(c(),d("div",Ue,[t("div",xe,[a[9]||(a[9]=t("label",{for:"description"},"Description:",-1)),T(t("textarea",{"onUpdate:modelValue":a[4]||(a[4]=v=>l.value=v),id:"description"},null,512),[[F,l.value]])]),t("div",De,[I(Ce,{modelValue:s.value,"onUpdate:modelValue":a[5]||(a[5]=v=>s.value=v)},null,8,["modelValue"])]),t("div",Be,[a[10]||(a[10]=t("label",{for:"category"},"Category",-1)),T(t("input",{type:"text","onUpdate:modelValue":a[6]||(a[6]=v=>p.value=v),id:"category"},null,512),[[F,p.value]])]),t("div",Se,[I(pe,{modelValue:i.value,"onUpdate:modelValue":a[7]||(a[7]=v=>i.value=v)},null,8,["modelValue"])])])):h("",!0)]),_:1})])]),t("div",{class:"modal-actions"},[t("button",{onClick:V,class:"secondary-btn"},"Cancel"),t("button",{onClick:x,class:"primary-btn"},"Save")])])])])):h("",!0)}}),Ae=$(Ne,[["__scopeId","data-v-5fec1b04"]]),Le={class:"collection"},Me={class:"collection-header"},Re=["title"],Oe={class:"search-filter"},Pe=b({__name:"Collection",props:{slug:{}},setup(m){const u=m,e=Y(),{collections:r,addItemToCollection:n}=P(),l=g(null),o=g(!0),i=g(!1),s=g(null),p=D(()=>r.value.find(y=>y.slug===(e.params.slug??u.slug))),f=D(()=>p.value?.items??[]),V=D(()=>{let y=f.value;if(o.value||(y=y.filter(_=>_.completed)),!l.value)return y;const C=l.value.toLowerCase();return y.filter(_=>_.name.toLowerCase().includes(C)||_.description?.toLowerCase().includes(C)||_.tags?.some(q=>q.toLowerCase().includes(C))||_.category?.toLowerCase().includes(C))});async function x(){const y=await n(u.slug,{name:"New collection item",description:null,completed:!1,imageBase64:null,tags:[],category:null});i.value=!0,s.value=y}function w(){i.value=!1,s.value=null}function a(){i.value=!1,s.value=null}function v(y){s.value=y,i.value=!0}return M(()=>e.params.slug,()=>{}),(y,C)=>(c(),d(U,null,[t("div",Le,[t("div",Me,[t("h1",{class:"collection-title",title:p.value?.slug},"Your "+k(p.value?.name),9,Re),I(j,{modelValue:o.value,"onUpdate:modelValue":C[0]||(C[0]=_=>o.value=_),"unchecked-state":"Show missing?","checked-state":"Hide missing?"},{default:z(()=>C[2]||(C[2]=[R("Show missing?")])),_:1},8,["modelValue"]),t("div",Oe,[T(t("input",{"onUpdate:modelValue":C[1]||(C[1]=_=>l.value=_),type:"text",placeholder:"Search by name or description..."},null,512),[[F,l.value]])]),t("button",{onClick:x,class:"primary-btn"},"Create new Item")]),I(G,{"completed-items":V.value?.filter(_=>_.completed==!0).length??0,"total-items":V.value?.length??0},null,8,["completed-items","total-items"]),I(ie,{items:V.value??[],onOpen:v},null,8,["items"])]),s.value?(c(),A(Ae,{key:0,"is-visible":i.value,item:s.value,onSave:a,onClose:w},null,8,["is-visible","item"])):h("",!0)],64))}});export{Pe as default};
