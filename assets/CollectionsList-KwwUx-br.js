import{d as A,i as m,w as F,c as d,a as R,e,t as g,s as L,o as r,_ as I,g as v,F as y,r as P,u as _,p as D,k as T,v as j,j as $,x as M}from"./index-CCUOU0ia.js";import{u as U,P as X,F as x}from"./useCollections-DquDfmTv.js";function q(f){return f.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")}const z={key:0,class:"dialog-overlay"},G={class:"dialog-content"},H={class:"dialog-header"},J={class:"default-text"},K={class:"dialog-body"},O={class:"dialog-footer"},Q=A({__name:"ConfirmationDialog",props:{title:{},show:{type:Boolean},isDeleteDialog:{type:Boolean}},emits:["close","save","delete"],setup(f,{emit:i}){const n=f,l=m(n.show);F(()=>n.show,a=>{l.value=a});const o=i;function c(){l.value=!1,o("close")}function C(){o("save")}function h(){o("delete")}return(a,w)=>l.value?(r(),d("div",z,[e("div",G,[e("header",H,[e("h2",J,g(a.title),1),e("button",{onClick:c,class:"dialog-close-btn"},"X")]),e("div",K,[L(a.$slots,"default",{},void 0)]),e("footer",O,[e("button",{onClick:c,class:"secondary-btn"},"Cancel"),a.isDeleteDialog?(r(),d("button",{key:1,onClick:h,class:"delete-btn"},"Delete")):(r(),d("button",{key:0,onClick:C,class:"primary-btn"},"Save"))])])])):R("",!0)}}),N=I(Q,[["__scopeId","data-v-42ad6f65"]]),W={class:"collections"},Y={class:"table-container"},Z=["onClick"],ee={class:"actions"},te=["onClick"],le=["onClick"],oe={class:"default-text"},se={class:"emphasis-text"},ie=A({__name:"CollectionsList",setup(f){const i=m(!1),n=m(!1),l=m(null),o=m(null),{collections:c,addCollection:C,removeCollection:h,saveCollection:a}=U();function w(u){l.value=c.value.find(t=>t.id===u)??null,o.value=l.value?.name??null,i.value=!0}function B(u){l.value=c.value.find(t=>t.id===u)??null,o.value=l.value?.name??null,n.value=!0}function b(){i.value=!1,n.value=!1}async function S(){l.value&&o.value&&(l.value.name=o.value,l.value.slug=q(o.value),await a(l.value)),i.value=!1}async function V(){l.value&&(await h(l.value.id),n.value=!1)}async function k(){await C("New Collection")}function E(u){M.push(u)}return(u,t)=>(r(),d(y,null,[e("div",W,[t[2]||(t[2]=e("h1",{class:"header"},"All Collections",-1)),e("button",{onClick:k,class:"mobile primary-btn"},"Add new"),e("div",Y,[e("table",null,[t[1]||(t[1]=e("thead",null,[e("tr",null,[e("th",{class:"collection-name-header"},"Collection Name"),e("th",{class:"progress-bar-header"}),e("th",{class:"actions-header"},"Actions")])],-1)),e("tbody",null,[(r(!0),d(y,null,P(_(c),s=>(r(),d("tr",{key:s.id,class:"clickable-row"},[e("td",{class:"collection-name",onClick:p=>E(`/collection/${s.slug}`)},g(s.name),9,Z),e("td",null,[v(X,{"completed-items":s.items?.filter(p=>p.completed==!0).length??0,"total-items":s.items?.length??0},null,8,["completed-items","total-items"])]),e("td",ee,[e("button",{onClick:p=>w(s.id),class:"primary-btn"},[v(_(x),{icon:["fas","pen"]})],8,te),e("button",{onClick:p=>B(s.id),class:"delete-btn delete-icon"},[v(_(x),{icon:["fas","trash"]})],8,le)])]))),128)),e("tr",{key:"newRow"},[e("td",{colspan:"3",class:"add-new"},[e("button",{onClick:k,class:"primary-btn"},"Add new")])])])])])]),v(N,{title:"Edit collection",show:i.value,onClose:b,onSave:S},{default:D(()=>[e("div",null,[t[3]||(t[3]=e("span",{class:"default-text"},"Collection Name",-1)),T(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>o.value=s)},null,512),[[j,o.value]])])]),_:1},8,["show"]),v(N,{title:"Delete collection?",show:n.value,"is-delete-dialog":!0,onClose:b,onDelete:V},{default:D(()=>[e("div",null,[e("span",oe,[t[4]||(t[4]=$("Really delete this collection ")),e("strong",se,g(o.value),1),t[5]||(t[5]=$("?"))])])]),_:1},8,["show"])],64))}});export{ie as default};
